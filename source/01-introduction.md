# Introduction

## Problem Statement

Statistics as a scientific discipline has a dynamic nature, which can be observed in many statistical algorithms and theories as well as in data analysis. For example, asymptotic theories in statistics are inherently dynamic: they describe how a statistic or an estimator behaves as the sample size increase. Data analysis is almost never a static process; instead, we often have to iterate the analysis several times on different subsets of the data, and when it comes to writing the final report, it will be unnecessarily laborious to revise the whole report due to a small change in the data, or decide which part of the analysis should go to the report. 

Non-interactive dynamic graphics, or animations, can assist the understanding of some statistical methods. We demonstrate the process step by step by animation frames to gain intuition behind the statistical ideas. Interactive graphics progresses us beyond the limitations of static statistical displays, particularly for exploring data, and analyzing models. Although the frameworks of interactive graphics have been established in the 1960s, we still lack a truly open system which is programmable and allows us to explore data freely and interactively.

Statistical reporting is often the last step of data analysis, and traditionally it is separated with computing, i.e. we finish all the computations and collect the results before we write the report. This is not only more demanding in terms of labor work, but also, more seriously, error-prone. The paradigm of literate programming was brought forward in the 1980s to write software and documentation, and later it was incorporated into the R language as the well-known tool named Sweave for writing statistical reports. However, Sweave is not a complete implementation of literate programming, and lacks many useful features in statistical reporting such as cache, which is extremely important in data analysis involved with intensive computing.

This thesis addresses the issues in traditional statistical animations, interactive graphics and reporting by providing new frameworks and software, which integrate better with the dynamic aspects of statistical methods and data analysis.

## Overview

This thesis mainly consists of three parts: statistical animations, interactive graphics and dynamic reporting.

Animated graphs that demonstrate statistical ideas and methods can both attract interest and assist understanding. In this chapter we first discuss how animations can be related to some statistical topics such as iterative algorithms, random simulations, (re)sampling methods and dynamic trends, then we describe the approaches that may be used to create animations, and give an overview to the R package **animation**, including its design, usage and the statistical topics in the package. With the **animation** package, we can export the animations produced by R into a variety of formats, such as a web page, a GIF animation, a Flash movie, a PDF document, or an MP4/AVI video, so that users can publish the animations fairly easily. The design of this package is flexible enough to be readily incorporated into web applications, e.g., we can generate animations online with Rweb, which means we do not even need R to be installed locally to create animations. We will show examples of the use of animations in teaching statistics and in the presentation of statistical reports using Sweave or **knitr**. In fact, this paper itself was written with the **knitr** and  **animation** package, and the animations are embedded in the PDF document, so that readers can watch the animations in real time when they read the paper (the Adobe Reader is required). Animations can add insight and interest to traditional static approaches to teaching statistics and reporting, making statistics a more interesting and appealing subject.

Interactive graphics progresses us beyond the limitations of static statistical displays, particularly for exploring data, and analyzing models. A long missing feature in R graphics systems (either base or grid graphics) is support for interactivity. A number of standalone systems exist, GGobi, MANET and Mondrian, which support interactive displays of multivariate data, but they lack the extensibility, and tight integration with modeling that R furnishes. There have been several attempts to provide interactive graphics in R, from `locate()` (ages ago!) and `getGraphicsEvent() in base R, to packages **RGtk**, **RGtk2**, **rggobi**, **tcltk** and **iplots**. Iplots, the most recent, provides extensive interactive graphics, using the Java backend. It is fast and includes most common types of plots; basic operations in interactive graphics such as selection and zooming are also supported. However, it lacks some features such as the tour or direct support for color palettes.

In this chapter, we will introduce a new R package, **cranvas**, which is based on several other packages to make fast (Qt), flexible (R) and elegant interactive statistical graphics in R. The drawing is based on two packages **qtbase** and **qtpaint**, which provide API's to the Qt libraries in R. The data structure is based on plumbr and objectSignals, which bring forward a new data structure called "mutable data". These packages set up signals and listeners on data (implemented purely with R), so that changes in data can trigger changes in plots. The mutable data is also the foundation of a "data pipeline" behind **cranvas**, where events of statistical analysis importance, like variable transformation or dimension reduction, can be propagated through to the displays. The cranvas package aims to borrow from the design of **ggplot2**, which is based on a grammar of graphics (Wilkinson, 2005).  Currently this package includes common statistical graphics, histogram, scatterplot, bar plot, boxplot, parallel coordinate plot and map, and tours, and common interactions, brushing, identifying, deletion, zooming, panning and different types of linking. Color palettes are supported. We will show examples of the usage, how the ideas relate to other interactive graphics work, what is under the hood, and what we are planning in the future.

## Scope

The work described in this thesis contains collaboration with other people, and some work was built upon existing software packages. Here is a description of my original contribution:

animation
  ~ The idea is not new and there have been done before my **animation** package but they were mainly based on Java Applets, which have been obsolete nowadays. I re-implemented some of the old animations in this R package, and created several new demonstrations. I also wrote the tools to export animations from R.
cranvas
  ~ This is collaborative work with the **cranvas** development team including Di Cook, Heike Hofmann and Xiaoyue Cheng. I wrote most of the functions in this package. The package is based on other packages like **qtbase**, **qtpaint** and **plumbr**, which provide the infrastructure.
knitr
  ~ The initial design was based on the **decumar** package written by Hadley Wickham which is not published; later I extended the design in many directions. The idea was from literate programming and Sweave, but the implementation is completely different with Sweave in order to gain light-weight API's for advanced users.
formatR
  ~ It is one of the infrastructure packages behind **knitr**, and it is primarily my own work, with some contributions from Yixuan Qiu in its early stage.

